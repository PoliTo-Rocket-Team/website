!function(){"use strict";const t=window.matchMedia("(prefers-color-scheme: dark)");function e(){}function n(t,n){const s=n.enter||e,o=n.leave||e,i=n.move||e,a=n.extra;let r,l;t.addEventListener("mouseenter",(function(){c=null,t.addEventListener("mousemove",d),t.addEventListener("mouseleave",h,{once:!0}),s(a)}));let c=null;function u(){const e=t.getBoundingClientRect();i(r-e.left-window.scrollX,l-e.top-window.scrollY,e,a),c=null}function d(t){r=t.pageX,l=t.pageY,null==c&&(c=requestAnimationFrame(u))}function h(){t.removeEventListener("mousemove",d),null!=c&&cancelAnimationFrame(c),o(a)}}!function(){const e=document.querySelectorAll('input[type="radio"][name="theme"]'),n=localStorage.getItem("theme");if(n){for(var s of(document.body.setAttribute("data-theme",n),e))if(s.value===n){s.checked=!0;break}}else document.body.setAttribute("data-theme","system");for(var s of e)s.addEventListener("change",o);function o(){document.body.setAttribute("data-theme",this.value),localStorage.setItem("theme",this.value);const e="system"===this.value?t.matches:"dark"===this.value;window.dispatchEvent(new CustomEvent("PRT:theme",{detail:{dark:e}}))}}(),function(t){const e=document.getElementById("page-nav"),n=e.querySelector("button"),s=document.getElementById("page-content");if(!e||!n||!s)return alert("No page-nav or page-content");const o="open-page-nav-state";history.state===o&&history.back(),window.addEventListener("popstate",(function(){if(!i)return;i=!1,e.classList.remove("open"),n.classList.remove("active"),s.classList.remove("unfocus"),s.removeEventListener("click",a),document.body.classList.remove("has-nav-open")})),n.addEventListener("click",(function(){history.state===o?history.back():(history.pushState(o,""),function(){if(i)return;i=!0,e.classList.add("open"),n.classList.add("active"),s.classList.add("unfocus"),s.addEventListener("click",a),document.body.classList.add("has-nav-open")}())}));let i=!1;function a(){history.state===o&&history.back()}window.addEventListener("scroll",function(t,e){let n=!1;return function(){n||(n=!0,setTimeout((()=>{e(),n=!1}),t))}}(100,(function(){let n=window.scrollY;if(e.classList.toggle("down",n>t),Math.abs(n-r)<10)return;e.classList.toggle("hide",n>r),r=n})));let r=window.scrollY}(80);class s{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}eq(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}mul(t){return this.x*=t,this.y*=t,this}toString(){return`(${this.x}, ${this.y})`}static distance(t,e){return Math.hypot(t.x-e.x,t.y-e.y)}}function o(){}const i=document.querySelectorAll(".card"),a=new class{constructor(t,e=1){this.available=0,this.pool=[],this.creator=t,this.pool=new Array(e),this.available=(1<<e)-1;for(var n=0;n<e;n++)this.pool[n]=t()}get(){if(0===this.available){const t=this.creator();return this.pool.push(t),t}{const e=this.pool.length;let n;for(var t=0;t<e;t++)if(n=1<<t,this.available&n)return this.available-=n,this.pool[t]}}free(t){const e=this.pool.indexOf(t);if(-1===e)return;const n=1<<e;this.available&n?console.log("wtf"):this.available+=n}state(){return this.available.toString(2).padStart(this.pool.length)}}((()=>(console.log("spring created"),function(t,e=.01){const n=new s,i=new s,a=new s;let r;const l={move:o,end:o};return{aim:function(t,e){i.set(t,e),r||(performance.now(),r=requestAnimationFrame(c))},set:function(t,e){i.set(t,e),n.set(t,e),r&&(cancelAnimationFrame(r),r=null),l.end(t,e)},on:function(t,e){l[t]=e||o}};function c(o){a.eq(i).sub(n).mul(t),n.add(a),l.move(n.x,n.y),s.distance(i,n)<e?(r=null,l.end(i.x,i.y)):r=requestAnimationFrame(c)}}(.075,1e-4))));for(var r of i)n(r,{extra:{card:r,spring:null},enter:l,move:c,leave:u});function l(t){t.spring||(t.spring=a.get()),t.spring.on("end",null),t.spring.on("move",((e,n)=>{t.card.style.setProperty("--x",e.toFixed(4)),t.card.style.setProperty("--y",n.toFixed(4))}))}function c(t,e,n,s){s.spring.aim(2*t/n.width-1,2*e/n.height-1)}function u(t){t.spring.aim(0,0),t.spring.on("end",(()=>{t.spring.on("end",null),a.free(t.spring),t.spring=null}))}}();
